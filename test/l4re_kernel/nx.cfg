-- vim:set ft=lua:
local L4 = require("L4")
local l  = L4.default_loader;
local t = require("rom/test_env")

if t.HWCONFIG == nil then
  print "TAP TEST START"
  print "1..0 # SKIP - hardware configuration unknown"
  print "TAP TEST FINISH"
  return
end

if t.HWCONFIG.NX ~= "y" then
  print "TAP TEST START"
  print "1..0 # SKIP - non-executable page support not available"
  print "TAP TEST FINISH"
  return
end

l:start(
{
  log = L4.Env.log
}, "rom/" .. t.TEST_PROG);
